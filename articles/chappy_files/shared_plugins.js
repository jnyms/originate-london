define("age_gate_prompt",["backbone"],function(a){var b=a.View.extend({el:$(".nsfw-wrapper"),events:{"click .confirm-button":"onAgeConfirmClicked"},initialize:function(){this.setVariables(),this.getLocalStorage(),this.checkAgeGate()},setVariables:function(){this.has_localstorage=Modernizr.localstorage},checkAgeGate:function(){(null==this.age_gate||"true"!=this.age_gate)&&this.$el.show()},getLocalStorage:function(){this.has_localstorage&&(this.age_gate=localStorage.getItem("age_gate"))},saveLocalStorage:function(){this.has_localstorage&&localStorage.setItem("age_gate","true")},onAgeConfirmClicked:function(){this.saveLocalStorage(),this.$el.hide()}});return b}),define("backbone_patched",["backbone_original"],function(a){return a.View=function(a){return a.extend({constructor:function(b){this.options=b||{},a.apply(this,arguments)}})}(a.View),a}),define("collapsible_share_widget",["sharing_widget"],function(a){var b=a.extend({el:$(".collapsible-share-widget"),events:_.extend(a.prototype.events,{"click .toggle":"onToggleClicked","click .share":"onShareClicked"}),setVariables:function(){a.prototype.setVariables.call(this),this.toggle=this.$(".toggle"),this.toggle_icon=this.toggle.find(".site-icon")},onToggleClicked:function(a){this.toggle_icon.hasClass("plus")?this.toggle_icon.removeClass("plus").addClass("minus"):this.toggle_icon.removeClass("minus").addClass("plus"),this.$el.toggleClass("active",this.toggle_icon.hasClass("minus"))},onShareClicked:function(a){this.$el.toggleClass("active-share")}});return b}),define("global_header",["jquery","backbone","vmp_events","vmp_analytics","plugins","hoverintent"],function(a,b,c,d){var e=b.View.extend({el:a(".site-wrapper"),events:{"click .site-header .hamburger":"onMenuToggleClicked","click .logo":"onLogoClicked","click .site-menu .parent-item":"onMenuParentItemClicked","mouseenter .navigation-groups-container":"onMouseEnterNavigationGroupContainer","mouseleave .navigation-groups-container":"onMouseLeaveNavigationGroupContainer","click .site-header .social-icons":"onSocialTriggerClicked","mouseenter .site-header .social-icons":"onMouseEnterSocials","mouseleave .site-header .social-icons":"onMouseLeaveSocials","mouseenter .site-header .social-buttons-wrapper":"onMouseEnterSocials","mouseleave .site-header .social-buttons-wrapper":"onMouseLeaveSocials","click .search-container .search":"onSearchContainerSearchButtonClicked","click .search-container .cancel":"onSearchContainerCloseButtonClicked"},initialize:function(){this.setVariables(),this.setListeners(),this.setNavigationGroups(),this.setMediaQueries(),this.checkHeader(),this.initial_load=!1},setVariables:function(){this.site_menu=this.$(".site-menu"),this.site_menu_parent_items=this.$(".site-menu .parent-item"),this.site_script=this.options.site_script||null,this.site_header=this.$(".site-header"),this.header_height=this.site_header.length?this.site_header.height():0,this.header_offset_top=this.site_header.length?this.site_header.offset().top:0,this.header_timeout=null,this.header_timeout_time=500,this.header_social_icon_container=this.$(".social-icons"),this.social_buttons_container=this.$(".social-buttons-wrapper"),this.over_socials=!1,this.socials_timeout=null,this.navigation_trigger_els=this.$(".trigger"),this.navigation_groups_container=this.$(".navigation-groups-container"),this.navigation_group_els=this.$(".navigation-group"),this.navigation_groups=[],this.nav_group_mouse_entered=!1,this.prevent_duplicate_navigation_events=!1,this.prevent_duplicate_navigation_events_timeout=null,this.over_navigation_groups=!1,this.search_container=this.$(".search-container"),this.search_input=this.search_container.find(".gsc-input"),this.loading_html='<div class="loading-anim"></div>',this.html=a("html"),this.body=a("body"),this.has_touch=Modernizr.touch,this.animation_time=300,this.timeout_time=400,this.check_delay=200,this.slide_time=200,this.current_bp=0,this.in_small_viewport=!0,this.scroll_throttle=10,this.resize_throttle=100,this.previous_scroll=this.body.scrollTop()||this.html.scrollTop(),this.is_fixed=!1,this.initial_load=!1,this.inline_title_set=!1,this.body_click_excludes=[".social-icons",".social-buttons-wrapper",".navigation-items",".navigation-groups-container",".site-header .hamburger",".site-menu"]},setListeners:function(){var b=_.throttle(this.onWindowScroll.bind(this),this.scroll_throttle),c=_.debounce(this.onWindowResize.bind(this),this.resize_throttle);this.body.on("click touchstart",this.onBodyClick.bind(this)),a(window).on("scroll",b).trigger("scroll").on("resize",c).trigger("resize")},setNavigationGroups:function(){this.navigation_group_els.each(function(b,c){var d=a(c),e={el:c,$el:d,$trigger:null,key:d.attr("data-navigation-item-key")&&d.attr("data-navigation-item-key").length?d.attr("data-navigation-item-key"):"",has_sub_navigation:!1,content_loaded:!1};if(this.navigation_trigger_els.each(function(b,c){var d=a(c),f=d.attr("data-navigation-item-key")&&d.attr("data-navigation-item-key").length?d.attr("data-navigation-item-key"):"";f.length&&f==e.key&&(d.parents(".navigation-items.inline").find(".nav-title").length&&!this.inline_title_set&&(d=d.add(a(".inline .nav-title")),this.inline_title_set=!0),e.$trigger=null===e.$trigger?d:e.$trigger.add(d))}.bind(this)),d.hasClass("sub-navigation-group")&&(e.has_sub_navigation=!0,e.sub_navigation_trigger_els=d.find(".sub-navigation-items-container li"),e.sub_navigation_group_els=d.find(".sub-navigation-items .sub-navigation-group"),e.sub_navigation_groups=[],e.sub_navigation_trigger_els.each(function(b,c){var d=a(c),f={sub_$el:null,$trigger:d,key:e.key,sub_key:d.attr("data-sub-navigation-item-key")&&d.attr("data-sub-navigation-item-key").length?d.attr("data-sub-navigation-item-key"):"",content_loaded:!1};e.sub_navigation_group_els.each(function(){var b=a(this),c=b.attr("data-sub-navigation-item-key")&&b.attr("data-sub-navigation-item-key").length?b.attr("data-sub-navigation-item-key"):"";c.length&&c==f.sub_key&&(f.sub_$el=b)}),e.sub_navigation_groups.push(f),f.$trigger&&f.$trigger.length&&f.$trigger.on("click",this.onSubNavigationGroupClicked.bind(this,f,e)).on("mouseenter",this.onMouseEnterSubNavigationGroup.bind(this,f,e))}.bind(this))),e.$trigger&&e.$trigger.length){var f={timeout:0,sensitivity:2,interval:30};e.$trigger.on("click",this.onNavigationGroupClicked.bind(this,e)).hoverIntent({over:this.onMouseEnterNavigationGroup.bind(this,e),out:function(){},timeout:f.timeout,sensitivity:f.sensitivity,interval:f.interval}).on("mouseleave",this.onMouseLeaveNavigationGroup.bind(this,e))}this.navigation_groups.push(e)}.bind(this))},setMediaQueries:function(){void 0!==MQ&&MQ.init([{context:"global",callback:function(a){this.bpCallback(a)}.bind(this)}])},loadMenuContent:function(a){if(a){var b=a.$el;b.hasClass("inline-group")&&!a.content_loaded&&this.getModels(a.key,b,a)}},getModels:function(b,c,d){d.loading_el?d.loading_el.show():d.loading_el=a(this.loading_html).appendTo(c),d.content_loaded=!0,c=c.find(".menu-items-container").length?c.find(".menu-items-container"):c,a.get("/"+SITE_LOCALE+"/ajax/getmenusubitems",{key:b||"",limit:6}).done(function(a){if(a&&!a.items)try{a=JSON.parse(a)}catch(b){return!1}if(a.items&&a.items.length){for(var d=0,e=a.items.length;e>d;d++){var h=a.items[d],i={model:new f(h),parent:this},j=new g(i);c.append(j.render().el)}void 0!==window.srcN&&window.srcN.refresh()}}.bind(this)).error(function(a){d.content_loaded=!1}.bind(this)).always(function(){d.loading_el.hide()}.bind(this))},onBodyClick:function(b){for(var c=b.target,d=a(c),e=0,f=this.body_click_excludes.length;f>e;e++){var g=this.body_click_excludes[e];if(d.is(g)||d.parents(g).length)return}this.header_social_icon_container.hasClass("active")&&(this.header_social_icon_container.removeClass("active"),this.social_buttons_container.removeClass("shown")),this.navigation_groups_container.hasClass("shown")&&(this.navigation_groups_container.removeClass("shown"),this.navigation_group_els.removeClass("active"),this.navigation_trigger_els.removeClass("active")),this.$el.hasClass("menu-in")&&this.$el.removeClass("menu-in")},onWindowScroll:function(a){var b=this.body.scrollTop()||this.html.scrollTop(),d=this.header_offset_top;if(this.$el.toggleClass("fixed-header",b>(b>this.previous_scroll?d:this.header_offset_top)),this.$el.toggleClass("fixed-header-hideable",b>d),this.$el.hasClass("fixed-header-hideable")){if(this.is_fixed=!0,b>this.previous_scroll){this.navigation_groups_container.removeClass("shown"),this.navigation_group_els.removeClass("active"),this.navigation_trigger_els.removeClass("active");for(var e=0,f=this.navigation_groups.length;f>e;e++){var g=this.navigation_groups[e];g.has_sub_navigation&&(g.sub_navigation_trigger_els.removeClass("active"),g.sub_navigation_group_els.removeClass("active"))}}}else this.is_fixed=!1;this.previous_scroll=b,c.trigger("window:scroll",{event:a,from_top:b,header_is_fixed:this.is_fixed})},onWindowResize:function(a){this.header_timeout&&clearTimeout(this.header_timeout),this.checkHeader(),c.trigger("window:resize",{event:a})},onMenuToggleClicked:function(a){return this.$el.toggleClass("menu-in"),!1},onLogoClicked:function(a){this.$el.hasClass("menu-in")&&a&&a.preventDefault&&a.preventDefault(),this.$el.toggleClass("menu-in")},onMenuParentItemClicked:function(b){var c,d=b.target,e=a(d);e.is(".parent-item")||(e=e.parents(".parent-item")),e.length&&e.is(".parent-item")&&!e.hasClass("no-children")&&(c=e.next(".child-list"),c&&c.length&&(!e.hasClass("open")&&b&&b.preventDefault&&b.preventDefault(),c.toggleClass("open-child",!e.hasClass("open")),e.toggleClass("open")))},onNavigationGroupClicked:function(a,b){!a.$el.hasClass("active")&&!this.nav_group_mouse_entered&&b&&b.preventDefault&&b.preventDefault(),this.navigation_group_els.removeClass("active"),this.navigation_trigger_els.removeClass("active"),this.navigation_groups_container.addClass("shown"),a.$el.addClass("active"),a.$trigger.addClass("active"),this.has_touch&&this.loadMenuContent(a),a.has_sub_navigation&&a.sub_navigation_groups&&a.sub_navigation_groups.length&&a.sub_navigation_groups[0].$trigger.trigger(this.has_touch?"touchstart":"click")},onMouseEnterNavigationGroup:function(a,b){this.nav_group_mouse_entered=!0,this.onMouseEnterNavigationGroupContainer(b,a),this.loadMenuContent(a)},onMouseLeaveNavigationGroup:function(a,b){this.nav_group_mouse_entered=!1,this.onMouseLeaveNavigationGroupContainer(b)},onMouseEnterNavigationGroupContainer:function(a,b){this.over_navigation_groups=!0,this.prevent_duplicate_navigation_events||(this.navigation_groups_container.hasClass("shown")?b&&(this.navigation_group_els.removeClass("active"),this.navigation_trigger_els.removeClass("active"),b.$el.addClass("active"),b.$trigger.addClass("active"),b.has_sub_navigation&&b.sub_navigation_groups&&b.sub_navigation_groups.length&&b.sub_navigation_groups[0].$trigger.trigger("mouseenter")):(this.navigation_groups_container.addClass("shown"),b&&(this.prevent_duplicate_navigation_events=!0,this.prevent_duplicate_navigation_events_timeout&&clearTimeout(this.prevent_duplicate_navigation_events_timeout),this.prevent_duplicate_navigation_events_timeout=setTimeout(function(){this.navigation_group_els.removeClass("active"),this.navigation_trigger_els.removeClass("active"),b.$el.addClass("active"),b.$trigger.addClass("active"),b.has_sub_navigation&&b.sub_navigation_groups&&b.sub_navigation_groups.length&&b.sub_navigation_groups[0].$trigger.trigger("mouseenter"),this.prevent_duplicate_navigation_events=!1}.bind(this),this.animation_time))))},onMouseLeaveNavigationGroupContainer:function(a,b){this.over_navigation_groups=!1,this.prevent_navigation_groups&&clearTimeout(this.prevent_navigation_groups),this.prevent_navigation_groups=setTimeout(this.checkNavigationGroups.bind(this),this.check_delay)},checkNavigationGroups:function(){if(!this.over_navigation_groups){this.navigation_groups_container.removeClass("shown"),this.navigation_group_els.removeClass("active"),this.navigation_trigger_els.removeClass("active");for(var a=0,b=this.navigation_groups.length;b>a;a++){var c=this.navigation_groups[a];c.has_sub_navigation&&(c.sub_navigation_trigger_els.removeClass("active"),c.sub_navigation_group_els.removeClass("active"))}}},onSubNavigationGroupClicked:function(a,b,c){!a.$trigger.hasClass("active")&&c&&c.preventDefault&&c.preventDefault(),b.sub_navigation_trigger_els.removeClass("active"),b.sub_navigation_group_els.removeClass("active"),a.$trigger.addClass("active"),a.sub_$el.addClass("active"),a.content_loaded||this.getModels(a.sub_key,a.sub_$el,a)},onMouseEnterSubNavigationGroup:function(a,b,c){b.sub_navigation_trigger_els.removeClass("active"),b.sub_navigation_group_els.removeClass("active"),a.$trigger.addClass("active"),a.sub_$el.addClass("active"),a.content_loaded||this.getModels(a.sub_key,a.sub_$el,a)},onSocialTriggerClicked:function(a){!this.header_social_icon_container.hasClass("active")&&a&&a.preventDefault&&a.preventDefault(),this.site_script.loadSocials(),this.header_social_icon_container.addClass("active"),this.social_buttons_container.addClass("shown")},onMouseEnterSocials:function(a){this.in_small_viewport||(this.over_socials=!0,this.site_script.loadSocials(),this.socials_timeout=setTimeout(function(){this.over_socials&&(this.header_social_icon_container.addClass("active"),this.social_buttons_container.addClass("shown"))}.bind(this),this.timeout_time))},onMouseLeaveSocials:function(a){this.in_small_viewport||(this.over_socials=!1,this.socials_timeout&&clearTimeout(this.socials_timeout),setTimeout(this.checkSocials.bind(this),this.check_delay))},checkSocials:function(){this.over_socials||(this.header_social_icon_container.removeClass("active"),this.social_buttons_container.removeClass("shown"))},onSearchContainerSearchButtonClicked:function(a){this.search_container.addClass("active"),this.site_script.loadGoogleSearch(function(){0===this.search_input.length?(this.search_input_locator_timeout&&clearTimeout(this.search_input_locator_timeout),this.search_input_locator_timeout=window.setTimeout(function(){this.search_input=this.search_container.find(".gsc-input"),this.search_input.focus()}.bind(this),300)):this.search_input.focus()}.bind(this))},onSearchContainerCloseButtonClicked:function(a){this.search_container.removeClass("active")},checkHeader:function(a){return this.header_height=this.site_header.length?this.site_header.height():0,this.$el.hasClass("fixed-header")&&!a?void(this.header_timeout=setTimeout(this.checkHeader.bind(this),2*this.header_timeout_time)):(this.header_offset_top=this.site_header.length?this.site_header.offset().top:0,void(this.header_timeout=setTimeout(this.checkHeader.bind(this),this.header_timeout_time)))},handleSmallViewport:function(){this.in_small_viewport=!0},handleLargeViewport:function(){this.in_small_viewport=!1,this.$el.removeClass("menu-in"),this.site_menu_parent_items.each(function(b,c){var d,e=a(c);e.removeClass("open"),d=e.next(".child-list"),d&&d.length&&d.slideUp(this.slide_time)}.bind(this))},bpCallback:function(a){if(a=Number(a.replace(/[\D]+/g,"")),!isNaN(a))switch(this.current_bp=a,c.current_bp=a,c.trigger("window:bp",a),!0){case a>=900:this.handleLargeViewport();break;default:this.handleSmallViewport()}}}),f=b.Model.extend({}),g=b.View.extend({className:"menu-item",tagName:"article",template:_.template(a("#nav-item-template").length?a("#nav-item-template").html():""),render:function(){return this.$el.html(this.template(this.model.toJSON()||{})),setTimeout(this.onAfterRender.bind(this),50),this},onAfterRender:function(){this.$el.parents(".inline-group").length&&this.$el.addClass("menu-inline-item").removeClass("menu-item")}});return e}),define("hoverintent",["jquery"],function(a){a.fn.hoverIntent=function(b,c,d){var e={interval:100,sensitivity:7,timeout:300};e="object"==typeof b?a.extend(e,b):a.isFunction(c)?a.extend(e,{over:b,out:c,selector:d}):a.extend(e,{over:b,out:b,selector:c});var f,g,h,i,j=function(a){f=a.pageX,g=a.pageY},k=function(b,c){return c.hoverIntent_t=clearTimeout(c.hoverIntent_t),Math.abs(h-f)+Math.abs(i-g)<e.sensitivity?(a(c).off("mousemove.hoverIntent",j),c.hoverIntent_s=1,e.over.apply(c,[b])):(h=f,i=g,c.hoverIntent_t=setTimeout(function(){k(b,c)},e.interval),void 0)},l=function(a,b){return b.hoverIntent_t=clearTimeout(b.hoverIntent_t),b.hoverIntent_s=0,e.out.apply(b,[a])},m=function(b){var c=jQuery.extend({},b),d=this;d.hoverIntent_t&&(d.hoverIntent_t=clearTimeout(d.hoverIntent_t)),"mouseenter"==b.type?(h=c.pageX,i=c.pageY,a(d).on("mousemove.hoverIntent",j),1!=d.hoverIntent_s&&(d.hoverIntent_t=setTimeout(function(){k(c,d)},e.interval))):(a(d).off("mousemove.hoverIntent",j),1==d.hoverIntent_s&&(d.hoverIntent_t=setTimeout(function(){l(c,d)},e.timeout)))};return this.on({"mouseenter.hoverIntent":m,"mouseleave.hoverIntent":m},e.selector)}}),define("latest_videos_carousel",["lede_carousel"],function(a){var b=a.Vmp_Carousel,c=a.Item_Model,d=a.Item_View,e=b.extend({setVariables:function(){b.prototype.setVariables.call(this),this.item_view=f,this.wrapper=this.$(".items-wrapper"),this.container=this.$(".items-container"),this.items=this.container.find(".item"),this.total_items=this.items.length,this.total_pages=Math.ceil(this.total_items/this.items_per_page);var a=this.$el.attr("data-ids-not-in");a&&(this.ids_not_in=a.split(",")),this.prev_items_to_load=8,this.items_to_load=4*this.items_per_page,this.additional_items_endpoint="/"+SITE_LOCALE+"/ajax/getlatestvideos",this.total_available_items=parseInt(this.wrapper.attr("data-total-videos"),10)-this.total_items},getAdditionalInitialModelData:function(a){return{id:parseInt(a.attr("data-model-id"),10)}},addLoadedItems:function(a){b.prototype.addLoadedItems.call(this,a),srcN.refresh()}}),f=d.extend({className:"item",template:_.template($("#carousel-list-item-template").length?$("#carousel-list-item-template").html():""),tagName:"article",render:function(){return this.$el.html(this.template(this.model.toJSON()||{})),this.$el.attr("data-model-id",this.model.get("id")),this}});return{Latest_Video_Carousel:e,Video_Thumb_Model:c,Video_Thumb_View:f}}),define("lede_carousel",["jquery","backbone","vmp_events","hammer"],function(a,b,c,d){var e=b.View.extend({el:a(".lede-carousel"),events:{"click .left-arrow":"onLeftControlClicked","click .right-arrow":"onRightControlClicked"},initialize:function(){return this.name="lede-carousel",this.setVariables(),this.setTotalPages(),this.checkForRequiredVariables()?(this.collection=new b.Collection([],{model:this.item_model}),this.hammertime=new d(this.wrapper[0],this.hammertime_options),this.setListeners(),this.setInitialCollection(),void this.currentPageChanged()):!1},getAdditionalInitialModelData:function(a){return{}},setVariables:function(){this.item_model=f,this.item_view=g,this.append_comments=!0,this.additional_items_endpoint="",this.additional_items_loading=!1,this.show_after_load=!1,this.is_left_control_anim=this.isRightControlAnim=!1,this.items_per_page=2,this.total_items=this.total_pages=this.current_page=0,this.left_control=this.$(".left-arrow"),this.right_control=this.$(".right-arrow"),this.has_transforms=Modernizr.csstransforms,this.items_el_class=".item",this.wrapper="",this.items="",this.total_available_items=0,this.container="",this.ids_not_in=!1,this.initial_container_offset=this.hammertime_left_value=0,this.hammertime_threshold=30,this.hammertime_options={swipe_velocity:.4,drag_lock_to_axis:!0,drag_block_vertical:!1}},setListeners:function(){this.hammertime.on("release dragleft dragright swipeleft swiperight",this.onHammertimeEvent.bind(this)),this.listenTo(this.collection,"reset",this.collectionAddAll),this.listenTo(this.collection,"add",this.collectionAddOne),this.listenTo(this.collection,"remove",this.collectionRemoveOne),c.on("window:resize",_.debounce(this.scrollContainer.bind(this),500),this).on("window:bp",this.bpCallback,this),this.bpCallback()},setInitialCollection:function(){var b=[];_.each(this.items,function(c){var d=a(c),e=this.getAdditionalInitialModelData&&"function"==typeof this.getAdditionalInitialModelData?this.getAdditionalInitialModelData(d):{};b.push(a.extend(!0,e,{_el:d,collection:this.collection}))},this),this.collection.reset(b)},setItemsPerPage:function(a){this.items_per_page=this.items_to_load=a,this.setTotalPages(),this.container.addClass("no-transitions"),this.current_page=0,this.currentPageChanged(),this.scrollContainer(),setTimeout(function(){this.container.removeClass("no-transitions")}.bind(this),300),this.items_to_load=4*a,this.prev_items_to_load=this.items_to_load},setTotalPages:function(){this.collection&&this.collection.length>0&&(this.total_pages=Math.ceil(this.collection.length/this.items_per_page))},collectionAddAll:function(){this.collection.each(this.collectionAddOne,this)},collectionAddOne:function(a){var b=new this.item_view({model:a,parent:this});a.get("_el")||this.container.append(this.append_comments?"<!---->":"",b.render().el),this.ids_not_in.push(a.get("id")),this.checkCollectionLength()},collectionRemoveOne:function(a){a.trigger("destroy"),this.checkCollectionLength()},checkCollectionLength:function(){},doAjaxCall:function(b,c){a.ajax(b).done(function(a){this.onAjaxSuccess(a,c)}.bind(this)).error(function(a){this.onAjaxError(a,c)}.bind(this)).always(this.onAjaxAlways.bind(this))},onAjaxSuccess:function(a,b){b&&"function"==typeof b&&b.call(this,null,a)},onAjaxError:function(a,b){b&&"function"==typeof b&&b.call(this,!0,a)},onAjaxAlways:function(){this.item_loading=this.additional_items_loading=!1,this.$el.removeClass("loading")},onLeftControlClicked:function(a){this.current_page-1>=0&&(this.current_page-=1,this.currentPageChanged(),this.is_left_control_anim=!0,this.scrollContainer())},onRightControlClicked:function(a){if(this.current_page+1<this.total_pages){var b=this.collection.length-(this.current_page+1)*this.items_per_page;b<this.items_per_page&&this.total_available_items>0?(this.prev_items_to_load=this.items_to_load,this.items_to_load=4*this.items_per_page-b,this.loadAdditionalItems(!0)):(this.current_page+=1,this.currentPageChanged(),this.scrollContainer())}else this.total_available_items>0&&this.loadAdditionalItems(!0)},onHammertimeEvent:function(a){if(a.gesture.direction!=d.DIRECTION_DOWN&&a.gesture.direction!=d.DIRECTION_UP){var b=Math.abs(a.gesture.angle);if(!(b>50&&130>b))switch(a.gesture.preventDefault(),this.container.addClass("no-transitions"),a.type){case"dragleft":case"dragright":this.onHammertimeDragLeftRight(a);break;case"swipeleft":this.onHammertimeSwipeLeft(a);break;case"swiperight":this.onHammertimeSwipeRight(a);break;case"release":this.onHammertimeRelease(a)}}},onHammertimeDragLeftRight:function(a){var b=a.gesture.deltaX;this.hammertimeContainer(b)},onHammertimeSwipeLeft:function(a){this.container.removeClass("no-transitions"),this.current_page+1<this.total_pages&&(this.current_page+=1,this.currentPageChanged()),this.scrollContainer(),this.total_available_items>0&&this.loadAdditionalItems(),a.gesture.stopDetect()},onHammertimeSwipeRight:function(a){this.container.removeClass("no-transitions"),this.hammertime_left_value>0?(this.current_page=0,this.currentPageChanged(),this.scrollContainer()):this.onLeftControlClicked(),a.gesture.stopDetect()},onHammertimeRelease:function(a){if(this.container.removeClass("no-transitions"),this.hammertime_left_value>0)this.scrollContainer();else{var b=this.wrapper.width(),c=a.gesture.deltaX,d=c>0?-1:1,e=100*Math.abs(c)/b;e>=this.hammertime_threshold&&(d>0&&this.current_page+1<this.total_pages||0>d&&this.current_page-1>=0)&&(this.current_page+=d,this.currentPageChanged(),this.total_available_items>0&&this.loadAdditionalItems()),this.scrollContainer()}},loadAdditionalItems:function(a){return 0===this.total_available_items||this.additional_items_loading?!1:(void 0!==a&&a===!0&&(this.show_after_load=this.isRightControlAnim=!0),this.additional_items_loading=!0,this.$el.addClass("loading"),void this.doAjaxCall({type:"GET",url:this.additional_items_endpoint,data:this.getAjaxData()},this.onAdditionalItemsLoaded))},onAdditionalItemsLoaded:function(a,b){if(this.prev_items_to_load!==this.items_to_load&&(this.items_to_load=this.prev_items_to_load,this.prev_items_to_load=this.items_to_load),a)return this.total_available_items=this.total_items,this.show_after_load=!1,this.currentPageChanged(),!1;if(b&&!b.items)try{b=JSON.parse(b)}catch(c){return this.total_available_items=this.total_items,this.show_after_load=!1,this.currentPageChanged(),!1}return b.items&&b.items.length?(this.addLoadedItems(b),this.total_available_items-=b.items.length,this.setTotalPages(),this.show_after_load&&this.isRightControlAnim&&(this.current_page+=1,this.currentPageChanged(),this.scrollContainer()),void(this.show_after_load=!1)):(this.total_available_items=this.total_items,this.show_after_load=!1,this.currentPageChanged(),!1)},addLoadedItems:function(a){this.collection.add(a.items)},getAjaxData:function(){return{limit:this.items_to_load,ids_not_in:this.ids_not_in?this.ids_not_in.join(","):""}},currentPageChanged:function(){0===this.current_page?this.left_control.addClass("disabled"):this.left_control.removeClass("disabled"),this.current_page==this.total_pages-1&&this.total_available_items<=0?this.right_control.addClass("disabled"):this.right_control.removeClass("disabled")},scrollContainer:function(){if(this.container.length){var a=this.current_page*this.items_per_page,b=this.$(this.items_el_class).eq(a);item_position=b.position();var c=-1*item_position.left;this.has_transforms?this.container.css(this.formatTransformCss(c)):this.container.css("left",c),this.is_left_control_anim=this.isRightControlAnim=!1,this.initial_container_offset=this.hammertime_left_value=c}},hammertimeContainer:function(a){if(a=isNaN(Number(a))?0:Number(a),this.container.length){var b=a+this.initial_container_offset;this.has_transforms?this.container.css(this.formatTransformCss(b)):this.container.css("left",b+"px"),this.hammertime_left_value=b}},formatTransformCss:function(a,b){var c=["webkitTransform","MozTransform","msTransform","OTransform","transfor"],d=0,e=c.length,f={};for(a=isNaN(Number(a))?0:Number(a),b=b||"translateX";e>d;d++){var g=c[d];f[g]=0!==a?b+"("+a+"px)":""}return f},checkForRequiredVariables:function(){return this.$el.length&&this.container&&this.container.length&&this.items&&this.items.length&&this.item_model?!0:!1},destroy:function(){return this.$el.remove(),!0},bpCallback:function(a){if(a||(a=c.current_bp),0!==this.$el.length&&!isNaN(a)){switch(!0){case a>=970:6!==this.items_per_page&&this.setItemsPerPage(6);break;case a>=700:4!==this.items_per_page&&this.setItemsPerPage(4);break;default:2!==this.items_per_page&&this.setItemsPerPage(2)}this.currentPageChanged()}}}),f=b.Model.extend({defaults:{_el:!1}}),g=b.View.extend({className:"item",tagName:"div",initialize:function(){this.model.get("_el")&&(this.$el=this.model.get("_el"))},render:function(){return this.$el.html(this.template(this.model.toJSON()||{})),this}});return{Vmp_Carousel:e,Item_Model:f,Item_View:g}}),define("photo_galleries_pager",["vmp_events","vmp_ajax_pager","vmp_ads","vmp_analytics"],function(a,b,c,d){var e=b.Vmp_Ajax_Pager,f=(b.Item_Model,b.Item_Model_View),g=e.extend({el:$(".photo-gallery-widget"),ad_template:$("#topic-photos-ad-code-template").length?$("#topic-photos-ad-code-template").html():!1,initialize:function(){e.prototype.initialize.call(this),this.checkHeights()},setVariables:function(){e.prototype.setVariables.call(this),this.item_model_view=h,this.total_items=this.$el.attr("data-total-items")&&this.$el.attr("data-total-items").length?Number(this.$el.attr("data-total-items").replace(/\D+/g,"")):0,this.html=$("html"),this.body=$("body"),this.$window=$(window),this.$document=$(document),this.ajax_padding=500,this.window_height=this.$window.outerHeight(),this.document_height=this.$document.outerHeight(),this.height_timeout=null,this.height_timeout_time=500,this.ad_counter=0},setListeners:function(){e.prototype.setListeners.call(this),a.on("window:scroll",this.onWindowScroll,this).on("window:resize",this.onWindowResize,this)},onWindowScroll:function(a){a.from_top+this.window_height>this.document_height-this.ajax_padding&&!this.additional_items_loading&&this.more_button.length&&this.more_button.trigger("click")},onWindowResize:function(a){this.height_timeout&&clearTimeout(this.height_timeout),this.checkHeights()},checkHeights:function(){this.window_height=this.$window.outerHeight(),this.document_height=this.$document.outerHeight(),this.height_timeout=setTimeout(this.checkHeights.bind(this),this.height_timeout_time)},getCurrentIds:function(){var a=[];return this.collection.each(function(b){var c=b.get("id");c&&a.push(c)}),a},addItems:function(){var a=this.getCurrentIds();this.doAjaxCall({type:"GET",url:"/"+SITE_LOCALE+"/ajax/getphotogalleries",data:{limit:6,ids_not_in:a.join(","),photo_gallery:!0}},this.addItemsCallback.bind(this))},onAjaxSuccess:function(b,c){e.prototype.onAjaxSuccess.call(this,b,c),this.total_items&&this.collection.models.length>=this.total_items&&a.off("window:scroll",null,this).off("window:resize",null,this)},addItemsCallback:function(a,b){if(b&&!b.items)try{b=JSON.parse(b)}catch(c){return!1}},collectionAddOne:function(a){if(e.prototype.collectionAddOne.call(this,a),this.ad_template){this.ad_counter++;var b=a.get("_el");b&&this.ad_counter%3===0&&c.create_ajax_ads(b,this.ad_template)}}}),h=f.extend({tagName:"article",className:"item photo-feature-item wide-feature",template:_.template($("#photo-stories-template").length?$("#photo-stories-template").html():""),render:function(){return f.prototype.render.call(this),this.$el.attr("data-model-id",this.model.get("id")),this.model.get("thumb_html")||this.$el.addClass("no-thumb"),this}});return g}),define("sharing_widget",["jquery","backbone","vmp_analytics"],function(a,b,c){var d=b.View.extend({sharing_data:{title:"",url:"",media:"",topic:"",tweet:"",twitter_handle:void 0!==SITE_SOCIALS&&void 0!==SITE_SOCIALS.social_twitter?SITE_SOCIALS.social_twitter:"vice",utm:void 0!==SITE_SOCIALS&&void 0!==SITE_SOCIALS.utm_source?SITE_SOCIALS.utm_source:"vicepinterest"},sharing_urls:{facebook:"https://www.facebook.com/sharer/sharer.php?u=<%= url %>",twitter:"http://twitter.com/share?text=<%= tweet %>&url=<%= url %>&via=<%= twitter_handle %>",googleplus:"https://plus.google.com/share?url=<%= url %>",pinterest:"http://pinterest.com/pin/create/button/?media=<%= media %>&url=<%= url %>&utm_source=<%= utm %>&description=<%= title %>",reddit:"http://www.reddit.com/submit?url=<%= url %>&title=<%= title %>",stumbleupon:"http://www.stumbleupon.com/submit?url=<%= url %>&title=<%= title %>",tumblr:"http://www.tumblr.com/share?v=3&u=<%= url %>&t=<%= title %>",pocket:"https://getpocket.com/save?url=<%= url %>&title=<%= title %>"},events:{"click .sharing-item":"shareAction"},initialize:function(){this.setVariables()},setVariables:function(){this.sharing_window_height=600,this.sharing_window_width=600,this.sharing_data=_.defaults(this.$el.data(),this.sharing_data),this.vertical_share_item=this.$(".vertical-share-widget .sharing-item")},shareAction:function(b){if(b&&b.target){var c=a(b.target);c.is(".sharing-item")||(c=c.parents(".sharing-item"));var d=c.parents(),e="";switch(!0){case a(d).hasClass("right-video-info-container"):e="VideoRightShare";break;case a(d).hasClass("vertical-share-widget"):e="ArticleVerticalShare";break;case a(d).hasClass("collapsible-share-widget"):e="ArticleCollapsibleShare";break;case a(d).hasClass("body-image-share-widget"):e="ArticleBodyImageSocialButtons";break;case a(d).hasClass("article-header-share-widget"):e="ArticleTopShareWidget";break;case a(d).hasClass("article-bottom-share-widget"):e="ArticleBottomShareWidget";break;case a(d).hasClass("video-single-share-widget"):e="VideoTopShareWidget"}this.shareClicked(b,e);var f=c.attr("data-share-type");if(f||this.sharing_urls[f]){if("comment"===f)return this.commentClicked(b,c,e),!1;"tumblr"===f&&(this.sharing_data.url=encodeURIComponent(this.sharing_data.url));var g=_.template(this.sharing_urls[f],this.sharing_data);return window.open(g,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+this.sharing_window_height+",width="+this.sharing_window_width),!1}}},commentClicked:function(b,c,d){a("html, body").animate({scrollTop:a(".comment-widget").offset().top-100},"fast"),d+="CommentClick",this.analyticsItemClicked(b,c.closest(".sharing-item"),d)},shareClicked:function(b,c){this.analyticsItemClicked(b,a(b.target).closest(".sharing-item"),c)},analyticsItemClicked:function(b,d,e,f){var g,h,i=a(b.target);i.is("a")||(i=i.parents("a")),g=d.attr("data-analytics-label")||"",h=parseInt(d.attr("data-analytics-value"),10)||0,c.logEvent(e,f||"clicked",g,h)}});return d}),define("side_scroll_tracker",["jquery","backbone","vmp_events"],function(a,b,c){var d=b.View.extend({el:a("body"),initialize:function(){this.setVariables(),this.setListeners(),this.checkContainer(),this.checkHeader()},setVariables:function(){this.$window=a(window),this.has_transforms=Modernizr.csstransforms,this.padding=15,this.global_header=this.options.global_header||null,this.global_header&&(this.header_height=this.global_header.header_height,this.header_timeout=null,this.header_timeout_time=500,this.container=this.options.container||null,this.container&&this.container.length&&(this.container_height=this.container.height(),this.container_offset_top=this.container.offset().top,this.container_timeout=null,this.container_timeout_time=500,this.side_scroll_el=this.options.side_scroll_el||null,this.side_scroll_el&&this.side_scroll_el.length&&(this.side_scroll_el_height=this.side_scroll_el.height(),this.side_scroll_el_top=Number(this.side_scroll_el.css("top").replace(/[\D]+/g,"")))))},setListeners:function(){this.global_header&&c.on("window:scroll",this.onWindowScroll,this).on("window:resize",this.onWindowResize,this)},onWindowScroll:function(a){if(a.from_top+this.header_height+this.padding>=this.container_offset_top){var b=a.from_top+this.header_height+this.padding-this.container_offset_top;b+this.side_scroll_el_height<=this.container_height?(this.side_scroll_el.addClass("fixed").removeClass("bottom-reached"),this.side_scroll_el_top=b):this.side_scroll_el.addClass("bottom-reached")}else 0!==this.side_scroll_el_top&&(this.side_scroll_el.removeClass("fixed bottom-reached"),this.side_scroll_el_top=0)},onWindowResize:function(a){this.container_timeout&&clearTimeout(this.container_timeout),this.checkContainer(),this.header_timeout&&clearTimeout(this.header_timeout),this.checkHeader(),this.$window.trigger("scroll")},checkHeader:function(){this.global_header&&(this.header_height=this.global_header.header_height,this.header_timeout=setTimeout(this.checkHeader.bind(this),this.header_timeout_time))},checkContainer:function(){this.container&&this.container.length&&this.side_scroll_el&&this.side_scroll_el.length&&(this.container_height=this.container.height(),this.container_offset_top=this.container.offset().top,this.side_scroll_el_height=this.side_scroll_el.height(),this.container_timeout=setTimeout(this.checkContainer.bind(this),this.container_timeout_time))}});return d}),define("site_script",["jquery","backbone","vmp_events","vmp_analytics","global_header","vice_network_bar","srcN","age_gate_prompt","vmp_ads","plugins"],function(a,b,c,d,e,f,g,h,i){var j=b.View.extend({el:a("body"),initialize:function(){this.setVariables(),this.setListeners(),this.initAds(),void 0!==g&&(window.srcN=g,g.init()),d.startTracker(),this.loadFacebookJS()},setVariables:function(){this.network_bar=new f({config:{version:"",locales:{tracking:!1},family:{tracking:!1}}}),this.global_header=new e({site_script:this}),this.has_touch=Modernizr.touch||!1,this.header_ad_masthead=a(".ad-masthead"),this.header_bars_offset=a(".vice-network-bar").height()+a(".main-header").height(),a(".nsfw-wrapper").length&&(this.age_gate_prompt=new h),this.publish_date_els=this.$(".publish-time, .publish-date"),this.google_search_engine_loaded=!1,this.socials_scripts_loaded=!1},setListeners:function(){},initAds:function(){window.vmp_ad_config&&"object"==typeof window.vmp_ad_config&&(window.vmp_ad_config.config.callbacks={after_all_ads_loaded:function(){this.global_header.checkHeader(!0)}.bind(this)},i.init(window.vmp_ad_config.config,window.vmp_ad_config.ad_slots,window.vmp_ad_config.ad_targetting_sizes))},getTarget:function(b,c){var d=a(b.target);return c=c||"",d.is(c)||(d=d.parents(c)),d.length?d:!1},preventDoubleEvents:function(a){return this.has_touch&&a.type&&a.type.toLowerCase().indexOf("touch")<0?!0:!1},loadSocials:function(){this.socials_scripts_loaded||(this.socials_scripts_loaded=!0,!function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//platform.twitter.com/widgets.js",d.async=!0,e.parentNode.insertBefore(d,e))}(document,"script","twitter-wjs"),function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://apis.google.com/js/plusone.js",a.async=!0;var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}())},loadFacebookJS:function(){!function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=203796769683945&version=v2.3",d.async=!0,e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk")},loadGoogleSearch:function(a){if(a||(a=function(){}),this.google_search_engine_loaded)return a.call(this);this.google_search_engine_loaded=!0;var b=function(){"complete"==document.readyState?a.call(this):google.setOnLoadCallback(function(){a.cal(this)}.bind(this),!0)};window.__gcse={callback:b};var c=GOOGLE_CUSTOM_SEARCH_ENGINE_ID,d=document.createElement("script");d.type="text/javascript",d.async=!0,d.src=("https:"==document.location.protocol?"https:":"http:")+"//cse.google.com/cse.js?cx="+c;var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e)},detectUserAgent:function(a){var b=navigator.userAgent,c=a||/(Pinterest)(?:\/)(\w+)/g;return c.exec(b)}});return j}),function(a,b){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gm,"")}),b.querySelectorAll||(b.querySelectorAll=function(a){var c,d=b.createElement("style"),e=[];for(b.documentElement.firstChild.appendChild(d),b._qsa=[],d.styleSheet.cssText=a+"{x-qsa:expression(d._qsa && d._qsa.push(this))}",window.scrollBy(0,0),d.parentNode.removeChild(d);b._qsa.length;)c=b._qsa.shift(),c.style.removeAttribute("x-qsa"),e.push(c);return b._qsa=null,e}),b.querySelector||(b.querySelector=function(a){var c=b.querySelectorAll(a);return c.length?c[0]:null}),b.getElementsByClassName||(b.getElementsByClassName=function(a){return a=String(a).replace(/^|\s+/g,"."),b.querySelectorAll(a)}),"undefined"==typeof b||"classList"in b.documentElement||!function(a){if("HTMLElement"in a||"Element"in a){var b="classList",c="prototype",d=(a.HTMLElement||a.Element)[c],e=Object,f=String[c].trim||function(){return this.replace(/^\s+|\s+$/g,"")},g=Array[c].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},h=function(a,b){this.name=a,this.code=DOMException[a],this.message=b},i=function(a,b){if(""===b)throw new h("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(b))throw new h("INVALID_CHARACTER_ERR","String contains an invalid character");return g.call(a,b)},j=function(a){for(var b=f.call(a.className),c=b?b.split(/\s+/):[],d=0,e=c.length;e>d;d++)this.push(c[d]);this._updateClassName=function(){a.className=this.toString()}},k=j[c]=[],l=function(){return new j(this)};if(h[c]=Error[c],k.item=function(a){return this[a]||null},k.contains=function(a){return a+="",-1!==i(this,a)},k.add=function(){var a,b=arguments,c=0,d=b.length,e=!1;do a=b[c]+"",-1===i(this,a)&&(this.push(a),e=!0);while(++c<d);e&&this._updateClassName()},k.remove=function(){var a,b=arguments,c=0,d=b.length,e=!1;do{a=b[c]+"";var f=i(this,a);-1!==f&&(this.splice(f,1),e=!0)}while(++c<d);e&&this._updateClassName()},k.toggle=function(a,b){a+="";var c=this.contains(a),d=c?b!==!0&&"remove":b!==!1&&"add";return d&&this[d](a),!c},k.toString=function(){return this.join(" ")},e.defineProperty){var m={get:l,enumerable:!0,configurable:!0};try{e.defineProperty(d,b,m)}catch(n){-2146823252===n.number&&(m.enumerable=!1,e.defineProperty(d,b,m))}}else e[c].__defineGetter__&&d.__defineGetter__(b,l)}}(self),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e});var c={breakpoints:[0],current_breakpoint:null,els:[],font_size:16,lazy_load:!0,lazy_load_offset:500,lazy_load_throttle:0,callbacks:{beforeParseEls:function(a){return a},afterParseEls:function(a){return a},beforeLoadEl:function(a){return a},afterLoadEl:function(a){}},init:function(){this.window=a,this.document=b,this.font_size=this.getDefaultFontSize().pop(),this.refresh(),this.bindEvents()},bindEvents:function(){this.window.addEventListener?(this.window.addEventListener("resize",this.onResize.bind(c),!1),this.window.addEventListener("scroll",this.onScroll.bind(c),!1)):this.window.attachEvent&&(this.window.attachEvent("onresize",this.onResize.bind(c)),this.window.attachEvent("onscroll",this.onScroll.bind(c)))},config:function(a){a.lazy_load&&(this.lazy_load=!!a.lazy_load),a.lazy_load_offset&&(this.lazy_load_offset=parseInt(a.lazy_load_offset,10)),a.lazy_load_throttle&&(this.lazy_load_throttle=parseInt(a.lazy_load_throttle,10)),a.callbacks&&a.callbacks.beforeParseEls&&(this.callbacks.beforeParseEls=a.callbacks.beforeParseEls),a.callbacks&&a.callbacks.afterParseEls&&(this.callbacks.afterParseEls=a.callbacks.afterParseEls),a.callbacks&&a.callbacks.beforeLoadEl&&(this.callbacks.beforeLoadEl=a.callbacks.beforeLoadEl),a.callbacks&&a.callbacks.afterLoadEl&&(this.callbacks.afterLoadEl=a.callbacks.afterLoadEl)},refresh:function(){for(var a=this.getEls(),b=0,c=a.length,d=[];c>b;b++){var e=a[b];e.classList.contains("parsed")||d.push(e)}return d.length?(this.els=this.els.concat(this.parseEls(d)),this.setCurrentBreakpoint(this.getNewCurrentBreakpoint()),this.calc(),void this.lazyload()):void this.lazyload()},getDefaultFontSize:function(a){a=a||this.document.body;var b=this.document.createElement("div");b.style.cssText="display:inline-block; padding:0; line-height:1; position:absolute; visibility:hidden; font-size:1em",b.appendChild(this.document.createTextNode("M")),a.appendChild(b);var c=[b.offsetWidth,b.offsetHeight];return a.removeChild(b),c},getEls:function(){return this.document.getElementsByClassName("srcN")},getEmsInPixels:function(a){return Number(a.replace(/[^-\d.]+/g,"")*this.font_size)},getNewCurrentBreakpoint:function(){for(var a=this.getWindowWidth(),b=this.breakpoints.length?this.breakpoints[0]:0,c=0,d=this.breakpoints.length;d>c;c++){var e=this.breakpoints[c];e>b&&a>=e&&(b=e)}return b},getPixelRatio:function(){return this.window.devicePixelRatio},getWindowWidth:function(){var a=0;return this.window.innerWidth?a=this.window.innerWidth:this.document.documentElement&&this.document.documentElement.clientWidth?a=this.document.documentElement.clientWidth:this.document.body&&(a=this.document.body.clientWidth),a},getWindowHeight:function(){var a=0;return this.window.innerWidth?a=this.window.innerHeight:this.document.documentElement&&this.document.documentElement.clientHeight?a=this.document.documentElement.clientHeight:this.document.body&&(a=this.document.body.clientHeight),a},setCurrentBreakpoint:function(a){this.current_breakpoint=a},addInternalBreakpoint:function(a){return void 0===a?!1:(-1===this.inArray(a,this.breakpoints)&&(this.breakpoints.push(a),this.breakpoints.sort(function(a,b){return a-b})),!0)},parseEls:function(a){if(this.verifyCallback("beforeParseEls")&&(a=this.callbacks.beforeParseEls.call(this,a)),!a||!a.length)return[];for(var b=0,c=a.length,d=[];c>b;b++){var e=a[b],f={el:e,current_source_key:null,needs_reload:!0,breakpoints:this.parseBreakpoints(e.getAttribute("data-breakpoints")||"100% (9999em)"),sources:this.parseSources(e.getAttribute("data-sources")||"")};e.classList.add("parsed"),d.push(f)}return this.verifyCallback("afterParseEls")&&(d=this.callbacks.afterParseEls.call(this,d)),d},parseBreakpoints:function(a){if(!a||!a.length)return[];a=a.split(",");for(var b=0,c=a.length,d={0:100};c>b;b++){var e=a[b].trim().replace(/[%()]/g,"").split(" "),f=e[0]?Number(e[0]):100,g=e[1]?e[1]:"9999em";g=-1===g.indexOf("em")?Number(g.replace(/[^-\d.]+/g,"")):this.getEmsInPixels(g),d[g]=f,this.addInternalBreakpoint(g)}return d},parseSources:function(a){if(!a||!a.length)return[];a=a.replace(/(px|em)(\s+)?,/g,"$1 BREAK ").split(" BREAK ");for(var b=0,c=a.length,d={};c>b;b++){var e=a[b].trim().replace(/[%()]/g,"").split(" "),f=e[0]?e[0]:null,g=e[1]?e[1]:"9999em";f&&(g=-1===g.indexOf("em")?Number(g.replace(/[^-\d.]+/g,"")):this.getEmsInPixels(g),d[g]=f)}return d},calc:function(){if(this.els&&this.els.length)for(var a=0,b=this.els.length;b>a;a++){var c=this.els[a];if(c.breakpoints&&Object.keys(c.breakpoints).length){var d,e,f,g,h,i=Object.keys(c.breakpoints),j=Object.keys(c.sources),k=0,l=i.length,m=j.length,n=this.current_breakpoint;for(i.sort(function(a,b){return Number(a)-Number(b)}),j.sort(function(a,b){return Number(a)-Number(b)});l>k;k++)e=Number(i[k]),n>=e&&(h=Number(c.breakpoints[e]));for(h&&(n=h/100*n),n<Number(i[0])&&(n=Number(i[0])),k=0;l>k;k++)e=Number(i[k]),n>=e&&(d=i[k+1]?Number(i[k+1]):null);for(n+=1,d||(g=Number(j.reverse().slice(0,1))),k=0;m>k;k++){var f=Number(j[k]);(!g||f>=n&&d>=f)&&(g=f)}c.current_source_key!=g&&(c.current_source_key=g,this.loadEl(c))}}},loadEl:function(a){this.verifyElLoad(a)&&(this.verifyCallback("beforeLoadEl")&&(a=this.callbacks.beforeLoadEl.call(this,a)),a.el.classList.remove("loaded"),a.el.classList.add("loading"),a.el.onload=function(b){a.el.classList.remove("loading"),a.el.classList.add("loaded"),this.verifyCallback("afterLoadEl")&&this.callbacks.afterLoadEl.call(this,a)}.bind(this),a.el.src=a.sources[a.current_source_key])},lazyload:function(){return this.els&&this.els.length?(clearTimeout(this.lazy_load_timeout),void(this.lazy_load_timeout=setTimeout(this.lazyloadPoll.bind(this),this.lazy_load_throttle))):void(this.lazy_load=!1)},lazyloadPoll:function(){for(var a=0,b=this.els.length;b>a;a++){var c=this.els[a],d=c.el;d.classList.contains("lazy")&&this.lazyloadInView(d)&&(d.classList.remove("lazy"),this.loadEl(c))}},lazyloadInView:function(a){var b=a.getBoundingClientRect();return(b.top>=0&&b.left>=0&&b.top)<=this.getWindowHeight()+parseInt(this.lazy_load_offset,10)},onResize:function(a){var b=this.getNewCurrentBreakpoint();this.current_breakpoint!==b&&(this.setCurrentBreakpoint(b),this.calc()),this.lazy_load&&this.lazyload()},onScroll:function(a){this.lazy_load&&this.lazyload()},inArray:function(a,b){for(var c in b)if(a===b[c])return c;return-1},verifyElLoad:function(a){return a&&a.current_source_key&&Object.keys(a.sources).length&&!a.el.classList.contains("lazy")&&a.el.src!=a.sources[a.current_source_key]},verifyCallback:function(a){return a&&a.length&&this.callbacks[a]&&"function"==typeof this.callbacks[a]}};c.config({lazy_load_throttle:0,lazy_load_offset:1500,callbacks:{afterParseEls:function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b],e=d.el,f=e.parentNode;e.classList.contains("no-wrap")||(d.container=this.document.createElement("div"),d.container.classList.add("vmp-srcN-container","parsed","loading"),e.classList.contains("fade-in")&&d.container.classList.add("fade-in"),f.insertBefore(d.container,e),f.removeChild(e),d.container.appendChild(e),e.classList.add("hires"))}return a},afterLoadEl:function(a){a.container&&(a.container.classList.add("loaded"),a.container.classList.remove("loading"))}}}),"function"==typeof define&&define.amd&&define("srcN",function(){return c})}(window,document),define("todays_stories_pager",["vmp_ajax_pager","vmp_events","vmp_ads","vmp_analytics"],function(a,b,c,d){var e=a.Vmp_Ajax_Pager,f=(a.Item_Model,a.Item_Model_View),g=e.extend({el:$(".homepage-todays-stories"),ad_templates:{super_billboard:$("#todays-stories-billboard-ad-template").length?$("#todays-stories-billboard-ad-template").html():!1,todays_stories:$("#todays-stories-ad-template").length?$("#todays-stories-ad-template").html():!1},initialize:function(){e.prototype.initialize.call(this),this.checkHeights(),this.more_button.find("p").hide()},setVariables:function(){e.prototype.setVariables.call(this),this.item_model_view=h,this.total_items=this.$el.attr("data-total-items")&&this.$el.attr("data-total-items").length?Number(this.$el.attr("data-total-items").replace(/\D+/g,"")):0,this.items_per_page=this.$el.attr("data-items-per-page")&&this.$el.attr("data-items-per-page").length?Number(this.$el.attr("data-items-per-page").replace(/\D+/g,"")):0,this.html=$("html"),this.body=$("body"),this.$window=$(window),this.$document=$(document),this.ajax_padding=500,this.window_height=this.$window.outerHeight(),this.document_height=this.$document.outerHeight(),this.height_timeout=null,this.height_timeout_time=500,this.ad_counter=0,this.stories_page_counter=2,this.more_button_link=this.more_button.length?this.more_button.find("a"):null,this.more_button_base_url=this.more_button_link.length?this.more_button_link.attr("href"):null,this.items_fetch_thread=this.$el.attr("data-thread")&&this.$el.attr("data-thread").length?this.$el.attr("data-thread"):"",this.more_button_navigate=!1,this.more_button_link=this.more_button.find("a")},setListeners:function(){e.prototype.setListeners.call(this),this.total_items>this.items_per_page&&b.on("window:scroll",this.onWindowScroll,this).on("window:resize",this.onWindowResize,this)},onWindowScroll:function(a){a.from_top+this.window_height>this.document_height-this.ajax_padding&&!this.additional_items_loading&&this.more_button.length&&this.more_button.trigger("click")},onWindowResize:function(a){this.height_timeout&&clearTimeout(this.height_timeout),this.checkHeights()},checkHeights:function(){this.window_height=this.$window.outerHeight(),this.document_height=this.$document.outerHeight(),this.height_timeout=setTimeout(this.checkHeights.bind(this),this.height_timeout_time)},getCurrentIds:function(){var a=[];return this.collection.each(function(b){b.get("id")&&a.push(b.get("id"))}),a},addItems:function(a){if(this.more_button_navigate)return void(this.more_button_link.length&&(window.location.href=this.more_button_link[0].href));a&&a.preventDefault&&a.preventDefault();var b=this.getCurrentIds();this.doAjaxCall({type:"GET",url:"/"+SITE_LOCALE+"/ajax/getarticles",data:{limit:6,ids_not_in:b.join(","),thread:this.items_fetch_thread}},this.addItemsCallback.bind(this))},onAjaxSuccess:function(a,c){e.prototype.onAjaxSuccess.call(this,a,c),this.stories_page_counter++,this.more_button_base_url&&this.more_button_link.attr("href",this.more_button_base_url+"/page/"+(Math.ceil(this.stories_page_counter/4)+1)),this.total_items&&this.collection.models.length>=this.total_items&&b.off("window:scroll",null,this).off("window:resize",null,this),this.total_items&&this.collection.models.length>=this.total_items&&(this.more_button_navigate=!0,this.more_button.show(),this.more_button.find("p").show())},addItemsCallback:function(a,b){if(b&&!b.items)try{b=JSON.parse(b)}catch(c){return!1}},collectionAddOne:function(a){if(e.prototype.collectionAddOne.call(this,a),"undefined"!=typeof this.ad_templates){this.ad_counter++;var b=a.get("_el");6===this.ad_counter&&this.ad_templates.super_billboard?c.create_ajax_ads(b,this.ad_templates.super_billboard):this.ad_counter%6===0&&this.ad_templates.todays_stories&&c.create_ajax_ads(b,this.ad_templates.todays_stories)}}}),h=f.extend({tagName:"article",template:_.template($("#grid-list-view-template").length?$("#grid-list-view-template").html():""),events:{"click a":"itemClicked"},render:function(){return f.prototype.render.call(this),this.$el.attr("data-model-id",this.model.get("id")),this.model.get("is_photo_category")&&this.$el.addClass("item-featured"),this},setVariables:function(){f.prototype.setVariables.call(this),this.publish_date_els=this.$(".publish-time, .publish-date"),this.data_analytics_label=this.$el.attr("data-analytics-label"),this.data_analytics_value=this.$el.attr("data-analytics-value")},itemClicked:function(a){if(this.data_analytics_label&&this.data_analytics_value){a&&a.preventDefault&&a.preventDefault();var b,c,e=$(a.target);if(e.is("a")||(e=e.parents("a")),b=e[0].href||"",c=e[0].target||"",b.length)return d.logEvent("native-ads","clicked",this.data_analytics_label,this.data_analytics_value,!1,!1,function(d,e){return"_blank"==c||a.metaKey||a.ctrlKey?void window.open(b,"_blank"):void(window.location.href=b)}),!1}}});return g}),define("vmp_ads",["jquery","vmp_analytics","vmp_events"],function(a,b,c){"use strict";var d={count:0,rendered:0,initial_ads_loaded:!1,ajax_ads_queue:[],dfp_is_loaded:!1,dfp_is_started:!1,ad_blocker:!1,ads:[],check_for_adblock:function(c){e.config.ad_block_script?a.ajax({url:e.config.ad_block_script,dataType:"script",cache:!0}).always(function(f,g){0===a("#adBlockerTest").length?(window.adblocker=!0,b.logEvent("Advertisements","ADBlock","Active",1,!0),d.dfp_blocked(),a(e.config.els).remove(),c.call()):(b.logEvent("Advertisements","ADBlock","Not Active",1,!0),d.adsafe_api(c))}):d.adsafe_api(c)},adsafe_api:function(b){e.config.adsafe_url?a.ajax({url:"http://api.adsafeprotected.com/db/client/27624/bsc.json?adsafe_url="+e.config.adsafe_url,dataType:"json"}).done(function(b){if(b.bsc){var c=0,f=0;a.each(b.bsc,function(a,b){e.config.targeting[a]=d.get_adsafe_value(b),b&&(c+=parseInt(b,10),f++)}),f>0&&(e.config.targeting.risk=d.get_adsafe_value(c/f))}}).always(function(){b.call()}):b.call()},get_adsafe_value:function(a){return a=parseInt(a,10),a>1e3?null:a>750?"low risk":a>500?"moderate risk":a>250?"high risk":"very high risk"},dfp_loader:function(b){return d.dfp_is_loaded=d.dfp_is_loaded||a('script[src*="googletagservices.com/tag/js/gpt.js"]').length,d.dfp_is_loaded?void b.call(!0):void d.check_for_adblock(function(){if(!d.ad_blocker){d.dfp_is_loaded=!0,window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[];var c="https:"===document.location.protocol,e=(c?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";a.getScript(e).error(function(){d.dfp_blocked()}).always(function(){b&&"function"==typeof b&&b.call()})}})},dfp_blocked:function(){d.ad_blocker=!0},get_url_targeting:function(){var a=window.location.pathname.replace(/\/$/,""),b=new RegExp("/([^/]*)","ig"),c=a.match(b),d=["/"],e="";if(c&&"/"!==a){var f="",g=c.length;if(g>0)for(var h=0;g>h;h++){f=c[h],d.push(f);for(var i=h+1;g>i;i++)f+=c[i],d.push(f);0===h&&(d.splice(-1,1),e=f)}d.push(e)}d=d.reverse();var j=(window.location.toString().replace(/\=/gi,":").match(/\?(.+)$/),RegExp.$1.split("&"));return{inURL:d,URLIs:d[0],Query:j}},get_ID:function(a,b){for(var c="",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",e=14;e>0;--e)c+=d[Math.round(Math.random()*(d.length-1))];return a+"-"+c+"-"+Date.now()+"-"+b}},e={ad_targetting_sizes:{banner:function(){return googletag.sizeMapping().addSize([1e3,200],[[970,250],[970,90]]).addSize([768,200],[728,90]).addSize([320,200],[[300,250],[320,150],[320,50]]).build()},header:function(){return googletag.sizeMapping().addSize([1e3,200],[[1600,250],[970,250],[970,90]]).addSize([768,200],[[728,90],[728,135]]).addSize([320,200],[[320,50],[320,150]]).build()},overlay:function(){return googletag.sizeMapping().addSize([1,1]).build()},sidebar:function(){return googletag.sizeMapping().addSize([1e3,200],[[300,250],[300,600]]).addSize([768,200],[[728,135],[728,90]]).addSize([320,200],[[300,250]]).build()},homepage_super_billboard:function(){return googletag.sizeMapping().addSize([1e3,201],[[970,550],[970,250],[970,90]]).addSize([768,201],[[728,415],[728,90]]).addSize([460,201],[[320,50],[320,150]]).addSize([320,201],[[300,250]]).build()},large_in_content:function(){return googletag.sizeMapping().addSize([1e3,201],[[970,250],[970,90]]).addSize([768,201],[[728,90]]).addSize([460,201],[[320,50],[320,150]]).addSize([320,201],[[320,50],[320,150],[300,250]]).build()},native_in_recommended:function(){return googletag.sizeMapping().addSize([1,2]).build()},sponsored:function(){return googletag.sizeMapping().addSize([300,60]).build()}},ad_slots:{header:{dimensions:[[1600,250],[728,90],[320,50],[320,50],[300,50],[300,50]],targeting_sizes:"header",targeting:{pos:"t"},callback:null},overlay:{dimensions:[[1,1]],targeting_sizes:"overlay",callback:null},homepage_super_billboard:{dimensions:[[970,550],[970,250],[970,90],[728,415],[728,90],[300,250],[320,150],[320,50]],callback:null,targeting_sizes:"homepage_super_billboard",targeting:{pos:"mh"}},large_in_content:{dimensions:[[970,250],[970,90],[728,90],[300,250],[320,150],[320,50]],callback:null,targeting_sizes:"large_in_content",targeting:{pos:"scroll"}},sidebar:{dimensions:[[300,600],[300,250]],targeting_sizes:"sidebar",targeting:{pos:"t"},callback:null},video_sidebar:{dimensions:[[300,250]],targeting_sizes:null,targeting:{pos:"t"},callback:null},sidebar_bottom:{dimensions:[[300,600],[300,250]],targeting_sizes:"sidebar",targeting:{pos:"l"},callback:null},banner:{dimensions:[[970,250],[970,90],[728,90],[300,250],[320,150],[320,50]],targeting_sizes:"banner",targeting:{pos:"m"},callback:null},sponsored:{dimensions:[[300,60]],targeting_sizes:"sponsored",targeting:{pos:"sponsored"}},rich_ad_header:{dimensions:[[1e3,92],[1e3,222]],targeting_sizes:"rich_banner",targeting:{pos:"t"}},native_in_recommended:{dimensions:[[1,2]],callback:null,targeting_sizes:"native_in_recommended",targeting:{pos:"t"}}},config:{els:".vmp-ad",dfp_account:"16916245",ad_unit:"",adsafe_url:null,ad_block_script:require.toUrl(SYSTEM_PREFIX+"/adblocker/advertisement.js"),googletag:!1,targeting:{},dfp_options:{set_category_exclusion:[],set_location:!1,enable_single_request:!0,collapse_empty_divs:!0,set_url_targetting:!1,disable_publisher_console:!1,disable_initial_load:!0,no_fetch:!1},callbacks:{after_all_ads_loaded:!1}},init:function(a,b,c){for(var f=document.URL.replace(/^[^\?]+\??/,"").split("&"),g={},h=0,i=f.length;i>h;h++){var j=f[h].split("="),k=j.shift(),l=j.join("=");g[k]=l}g.adunit&&(a.adunit=g.adunit),window.Krux&&(a.targeting.ksg=Krux.segments,a.targeting.kuid=Krux.user),e.set_options(a,b,c),d.dfp_loader(function(){e.create_ads()})},set_options:function(b,c,d){a.extend(!0,e.config,b),a.extend(!0,e.ad_slots,c),a.extend(!0,e.ad_targetting_sizes,d)},_configure_dfp:function(){d.dfp_is_started=!0,window.googletag.cmd.push(function(){if(e.config.dfp_options.set_url_targetting){d.get_url_targeting();a.extend(!0,e.config.dfp_options.setTargeting,{inURL:urlTargeting.inURL,URLIs:urlTargeting.URLIs,Query:urlTargeting.Query,Domain:window.location.host})}e.config.googletag&&window.googletag.cmd.push(function(){a.extend(!0,window.googletag,e.config.googletag)}),e.config.dfp_options.enable_single_request&&window.googletag.pubads().enableSingleRequest(),a.each(e.config.targeting,function(a,b){window.googletag.pubads().setTargeting(a,b)}),e.config.dfp_options.set_location&&"object"==typeof e.config.dfp_options.set_location&&("number"==typeof e.config.dfp_options.set_location.latitude&&"number"==typeof e.config.dfp_options.set_location.longitude&&"number"==typeof e.config.dfp_options.set_location.precision?window.googletag.pubads().setLocation(e.config.dfp_options.set_location.latitude,e.config.dfp_options.set_location.longitude,e.config.dfp_options.set_location.precision):"number"==typeof e.config.dfp_options.set_location.latitude&&"number"==typeof e.config.dfp_options.set_location.longitude&&window.googletag.pubads().setLocation(e.config.dfp_options.set_location.latitude,e.config.dfp_options.set_location.longitude)),e.config.dfp_options.set_category_exclusion.length>0&&a.each(e.config.dfp_options.set_category_exclusion,function(b,c){var d=a.trim(c);d.length>0&&window.googletag.pubads().setCategoryExclusion(d)}),e.config.dfp_options.collapse_empty_divs&&window.googletag.pubads().collapseEmptyDivs(),e.config.dfp_options.disable_publisher_console&&window.googletag.pubads().disablePublisherConsole(),e.config.dfp_options.disable_initial_load&&window.googletag.pubads().disableInitialLoad(),e.config.dfp_options.no_fetch&&window.googletag.pubads().noFetch(),window.googletag.enableServices()}),d.dfp_is_loaded=!0},create_ajax_ads:function(a,b){d.ajax_ads_queue.push({el:a,ad_template:b}),d.initial_ads_loaded&&this.render_ajax_queue()},render_ajax_queue:function(){if(!(d.ajax_ads_queue.length<1)){for(;d.ajax_ads_queue.length>0;){var a=d.ajax_ads_queue.shift();a.el&&a.ad_template&&a.el.after(a.ad_template)}this.create_ads()}},create_ads:function(b){if(!d.dfp_is_loaded)throw new Error("DFP is not loaded or configured, run init before this!");if(b||(b=a(e.config.els)),0!==b.length){if(d.ad_blocker||!window.googletag.cmd)return void b.hide();d.dfp_is_started||e._configure_dfp(),b.each(function(){var b=a(this),f=a(this).attr("data-ref"),g=e.ad_slots[f];if(g&&!b.attr("data-ad-parsed")){b.attr("data-ad-parsed",!0),d.count++;var h=d.get_ID(f,d.count),i=b.html();b.attr("id",h).html("").hide().addClass("display-none"),window.googletag.cmd.push(function(){var f,j=g.targeting_sizes,k=!1;j&&e.ad_targetting_sizes[j]&&(k=e.ad_targetting_sizes[j].call()),f=b.data("outofpage")?window.googletag.defineOutOfPageSlot("/"+e.config.dfp_account+"/"+e.config.adunit,h).addService(window.googletag.pubads()):k?window.googletag.defineSlot("/"+e.config.dfp_account+"/"+e.config.adunit,g.dimensions,h).defineSizeMapping(k).addService(window.googletag.pubads()):window.googletag.defineSlot("/"+e.config.dfp_account+"/"+e.config.adunit,g.dimensions,h).addService(window.googletag.pubads()),g.targeting&&a.each(g.targeting,function(a,b){f.setTargeting(a,b)});var l=b.data("exclusions");if(l){var m,n=l.split(",");a.each(n,function(b,c){m=a.trim(c),m.length>0&&f.setCategoryExclusion(m)})}f.oldRenderEnded=f.renderEnded,f.renderEnded=function(){d.rendered++;var f=b.css("display");"none"===f&&a.trim(i).length>0&&"original"===dfpOptions.collapseEmptyDivs&&(b.show().html(existingContent),f="block display-original"),b.removeClass("display-none").addClass("display-"+f),b.parents(".wrapper").addClass("ad-shown"),"none"===f?b.hide():b.show(),c.trigger("ad:loaded",{ad_unit_el:b,ad_loaded:"none"===f?!1:!0,size_target:j}),d.rendered===d.count&&(d.initial_ads_loaded||"function"!=typeof e.config.callbacks.after_all_ads_loaded||(e.config.callbacks.after_all_ads_loaded.call(this,d.ads),c.trigger("ad:allLoaded",{ads_rendered:d.rendered})),d.initial_ads_loaded=!0,e.render_ajax_queue()),"function"==typeof g.callback&&g.callback.call(this,b)},b.data("google_ad_unit",f),d.ads.push(f),window.googletag.display(h),e.config.dfp_options.disable_initial_load&&window.googletag.pubads().refresh([f])})}})}}};return e}),define("vmp_ajax_pager",["jquery","backbone"],function(a,b){var c=b.View.extend({el:a("body"),initialize:function(){this.setVariables(),this.setListeners(),this.collection=new b.Collection([],{model:this.item_model}),this.listenTo(this.collection,"reset",this.collectionAddAll),this.listenTo(this.collection,"add",this.collectionAddOne),this.listenTo(this.collection,"remove",this.collectionRemove);var c=[];this.list_items.each(function(b,d){var e=a(d),f={_el:e,id:e.attr("data-model-id")?e.attr("data-model-id"):!1};c.push(f)}.bind(this)),this.collection.reset(c),this.total_items&&this.collection.models.length<this.total_items&&this.more_button.show()},setVariables:function(){this.item_model=d,this.item_model_view=e,this.has_touch=Modernizr.touch,this.additional_items_loading=!1,this.comment_separated=!0,this.items_container=this.$(".items-container"),this.more_button=this.$(".more-button"),this.list_items=this.$(".item"),this.loading_html='<div class="loading-anim"></div>',this.loading_el=a(this.loading_html).prependTo(this.more_button).hide(),this.total_items=0},setListeners:function(){this.more_button.length&&this.more_button.on("click",this.addItems.bind(this))},getCurrentIds:function(){var a=[];return this.collection.each(function(b){a.push(b.get("id"))}),a&&a.length&&(a=a.join(", ").replace(/, /g,"+")),a},addItems:function(){this.doAjaxCall({data:{ids_on_page:this.getCurrentIds()}})},doAjaxCall:function(b,c){return this.additional_items_loading?!1:(this.additional_items_loading=!0,this.loading_el&&this.loading_el.length&&this.loading_el.show(),void a.ajax(b).done(function(a){this.onAjaxSuccess(a,c)}.bind(this)).error(function(a){this.onAjaxError(a,c)}.bind(this)).always(function(a){this.onAjaxAlways(a,c)}.bind(this)))},onAjaxSuccess:function(a,b){if(b&&"function"==typeof b&&b.call(this,null,a),a&&!a.items)try{a=JSON.parse(a)}catch(c){return b&&"function"==typeof b&&b.call(this,!0,c),!1}if(a&&a.items.length){for(var d=0,e=a.items.length;e>d;d++)this.collection.add(a.items[d]);void 0!==window.srcN&&window.srcN.refresh(),this.total_items&&this.collection.models.length>=this.total_items&&this.more_button.hide()}},onAjaxError:function(a,b){b&&"function"==typeof b&&b.call(this,!0,a)},onAjaxAlways:function(){this.loading_el&&this.loading_el.length&&this.loading_el.hide(),this.additional_items_loading=!1},collectionAddAll:function(){this.collection.each(this.collectionAddOne,this)},collectionAddOne:function(a){var b=new this.item_model_view({model:a,parent:this});a.get("_el")||this.items_container.append(this.comment_separated?"<!-- -->":"",b.render().el),this.checkCollectionLength()},collectionRemove:function(a){a.trigger("destroy"),this.checkCollectionLength()},checkCollectionLength:function(){}}),d=b.Model.extend({defaults:{_el:!1}}),e=b.View.extend({className:"item",tagName:"div",template:_.template(""),initialize:function(){this.model.on("destroy",this.onModelDestroy.bind(this)),this.model.get("_el")&&(this.$el=this.model.get("_el"),this.setVariables())},render:function(){return this.template?(this.$el.html(this.template(this.model.toJSON()||{})),this.$el[0].id=this.model.get("id"),this.model.set("_el",this.$el),this.setVariables(),this):void 0},setVariables:function(){},onModelDestroy:function(){this.$el.remove()}});return{Vmp_Ajax_Pager:c,Item_Model:d,Item_Model_View:e}}),define("vmp_analytics",[],function(){var a={},b={interval:null,interval_time:55e3,title:"Page Tracker",url:"/tracker",accounts:["UA-37305051-1"]},c={can_log:!1,total_analytics_accounts:TOTAL_ANALYTICS_ACCOUNTS||0};return c.init=function(){if(void 0!==window.ga&&(this.can_log=!0),this.can_log)for(var a=0,d=b.accounts.length;d>a;a++)ga("create",b.accounts[a],"auto",{name:"tracker_"+(c.total_analytics_accounts+a+1)})},c.recheck=function(){return void 0!==window.ga?(this.can_log=!0,!0):!1},a.logEvent=function(d,e,f,g,h,i,j){if(j||(j=function(){}),!(c.can_log&&c.recheck()&&d&&d.toString().length&&e&&e.toString().length))return j.call(a,!0);f=f&&f.toString().length?f.toString():null,g=g&&!isNaN(Number(g))?parseInt(g,10):null;var k={hitType:"event",eventCategory:d,eventAction:e,nonInteraction:void 0!==h?!!h:!1};f&&(k.eventLabel=f),g&&(k.eventValue=g);try{for(var l=0,m=c.total_analytics_accounts;m>l;l++)ga("tracker_"+(l+1)+".send",k);if(i===!0)for(l=0,m=b.accounts.length;m>l;l++)ga("tracker_"+(c.total_analytics_accounts+l+1)+".send",k);return j.call(a,null,k)}catch(n){return j.call(a,!0,n)}},a.startTracker=function(){c.can_log&&c.recheck()&&(b.interval&&clearInterval(b.interval),b.interval=setInterval(function(){var a={hitType:"pageview",title:b.title,page:b.url};try{for(var d=0,e=c.total_analytics_accounts;e>d;d++)ga("tracker_"+(d+1)+".send",a);for(d=0,e=b.accounts.length;e>d;d++)ga("tracker_"+(c.total_analytics_accounts+d+1)+".send",a)}catch(f){}},b.interval_time))},c.init(),a}),define("vmp_article",["jquery","backbone"],function(a,b){var c=b.View.extend({el:a(".rich-text"),initialize:function(){this.formatText()},formatText:function(){this.$("p span.photo_caption").parents("p").addClass("photo-credit")}});return c}),define("vmp_events",["jquery","backbone"],function(a,b){var c={};return _.extend(c,b.Events),c.current_bp=null,c}),define("youtube_player",["jquery"],function(a){var b={youtube_player:null,playVideo:function(b){return"undefined"!=typeof YT&&"undefined"!=typeof YT.Player?this.loadPlayer(b):(window.onYouTubeIframeAPIReady=function(a){return this.loadPlayer(b)}.bind(this),void a.getScript("//www.youtube.com/iframe_api"))},loadPlayer:function(b){return b=a.extend(!0,{container:null,video_id:null,width:640,height:360,player_vars:{autoplay:1,modestbranding:1,showinfo:0,autohide:1},player_events:{onReady:function(){},onStateChange:function(){}}},b),b.container&&b.video_id?new YT.Player(b.container,{videoId:b.video_id||"",width:b.width||640,height:b.height||360,playerVars:b.player_vars,events:b.player_events}):!1}};return b}),define("vice_network_bar",["backbone"],function(){var a=Backbone.View.extend({config:{version:"Beta",locales:{tag:"li",tracking:"vice",tracking_prefix:"trk_source",classes:["locale-item"],current:"",available:{}},family:{tag:"li",tracking:"vice_channels_menu",tracking_prefix:"trk_source",classes:["family-item"],available:{vice:{link:"http://www.vice.com",target:"_blank",label:"VICE",classes:["vice"],span_classes:["icon-sprite"]},"vice-video":{link:"https://video.vice.com",target:"_blank",label:"VICE Video",classes:["vice-video"],span_classes:["icon-sprite"]},viceland:{link:"https://viceland.com",target:"_blank",label:"Viceland",classes:["viceland"],span_classes:["icon-sprite"]},"vice-news":{link:"https://news.vice.com",target:"_blank",label:"VICE News",classes:["vice-news"],span_classes:["icon-sprite"]},noisey:{link:"http://noisey.com",target:"_blank",label:"Noisey",classes:["noisey"],span_classes:["icon-sprite"]},motherboard:{link:"http://motherboard.tv",target:"_blank",label:"Motherboard",classes:["motherboard"],span_classes:["icon-sprite"]},broadly:{link:"https://broadly.vice.com",target:"_blank",label:"Broadly",classes:["broadly"],span_classes:["icon-sprite"]},munchies:{link:"https://munchies.vice.com",target:"_blank",label:"Munchies",classes:["munchies"],span_classes:["icon-sprite"]},"vice-sports":{link:"https://sports.vice.com",target:"_self",label:"VICE Sports",classes:["vice-sports"],span_classes:["icon-sprite"]},"creators-project":{link:"http://thecreatorsproject.com",target:"_blank",label:"The Creators Project",classes:["creators-project"],span_classes:["icon-sprite"]},thump:{link:"http://thump.vice.com",target:"_blank",label:"Thump",classes:["thump"],span_classes:["icon-sprite"]},"i-d":{link:"http://i-d.vice.com",target:"_blank",label:"i-D",classes:["i-d"],span_classes:["icon-sprite"]},fightland:{link:"http://fightland.com",target:"_blank",label:"Fightland",classes:["fightland"],span_classes:["icon-sprite"]},"vice-on-hbo":{link:"http://hbo.vice.com",target:"_blank",label:"VICE on HBO",classes:["vice-on-hbo"],span_classes:["icon-sprite"]}}}},el:$(".vice-network-bar"),events:{"click .family-trigger":"onFamilyTriggerClicked","touchstart .family-trigger":"onFamilyTriggerClicked","mouseenter .family":"onMouseEnterFamily","mouseleave .family":"onMouseLeaveFamily","click .current-locale":"onLocalesTriggerClicked","touchstart .current-locale":"onLocalesTriggerClicked","mouseenter .locales":"onMouseEnterLocales","mouseleave .locales":"onMouseLeaveLocales","click .link-trigger":"onLinksTriggerClicked","touchstart .link-trigger":"onLinksTriggerClicked","mouseenter .links":"onMouseEnterLinks","mouseleave .links":"onMouseLeaveLinks"},initialize:function(a){this.options=a||{},this.setVariables(),this.setListeners(),this.loadGruntIcons(),this.buildNetworkBar(),this.links_container.addClass("built")},setVariables:function(){this.check_delay=0,this.body=$("body"),this.version_tag=this.$el.find(".version"),this.locales_container=this.$el.find(".locales"),this.current_locale=this.locales_container.find(".current-locale"),this.locale_list=this.locales_container.find("ul"),this.over_locales=!1,this.locales_timeout=null,this.family_container=this.$el.find(".family"),this.family_trigger=this.family_container.find(".family-trigger"),this.family_trigger_link=this.family_trigger.find("a"),this.family_list=this.family_container.find("ul"),this.over_family=!1,this.family_timeout=null,this.links_container=this.$el.find(".links"),this.links_trigger=this.links_container.find(".links-trigger"),this.links_trigger_link=this.links_trigger.find("a"),this.links_list=this.links_container.find("ul"),this.over_links=!1,this.links_timeout=null,this.timeout_time=400,this.config=this.options&&this.options.config&&"object"==typeof this.options.config?$.extend(!0,this.config,this.options.config):this.config,this.config.locales.available=this.getAvailableLocales(),this.config.locales.current=this.getCurrentLocale(),this.body_click_excludes=[".family-trigger",".family",".current-locale",".locales",".links-trigger",".links"]},setListeners:function(){this.body.on("click touchstart",this.onBodyClick.bind(this))},onBodyClick:function(a){for(var b=a.target,c=$(b),d=0,e=this.body_click_excludes.length;e>d;d++){var f=this.body_click_excludes[d];if(c.is(f)||c.parents(f).length)return}this.family_list.hasClass("shown")&&this.family_list.removeClass("shown"),this.locale_list.hasClass("shown")&&this.locale_list.removeClass("shown")},onFamilyTriggerClicked:function(a){return!this.family_list.hasClass("shown")&&a&&a.preventDefault&&a.preventDefault(),this.family_list.toggleClass("shown"),this.family_list.hasClass("shown")&&(this.over_locales=!1,this.over_links=!1,this.locales_timeout&&clearTimeout(this.locales_timeout),this.links_timeout&&clearTimeout(this.links_timeout),this.checkLocales(),this.checkLinks()),!1},onMouseEnterFamily:function(a){this.over_family=!0,this.family_timeout=setTimeout(function(){this.over_family&&this.family_list.addClass("shown")}.bind(this),this.timeout_time)},onMouseLeaveFamily:function(a){this.over_family=!1,this.family_timeout&&clearTimeout(this.family_timeout),setTimeout(this.checkFamily.bind(this),this.check_delay)},onLocalesTriggerClicked:function(a){return!this.locale_list.hasClass("shown")&&a&&a.preventDefault&&a.preventDefault(),this.locale_list.toggleClass("shown"),this.locale_list.hasClass("shown")&&(this.over_family=!1,this.over_links=!1,this.family_timeout&&clearTimeout(this.family_timeout),this.links_timeout&&clearTimeout(this.links_timeout),this.checkFamily(),this.checkLinks()),!1},onMouseEnterLocales:function(a){this.over_locales=!0,this.locales_timeout=setTimeout(function(){this.over_locales&&this.locale_list.addClass("shown")}.bind(this),this.timeout_time)},onMouseLeaveLocales:function(a){this.over_locales=!1,this.locales_timeout&&clearTimeout(this.locales_timeout),setTimeout(this.checkLocales.bind(this),this.check_delay)},onLinksTriggerClicked:function(a){return!this.links_list.hasClass("shown")&&a&&a.preventDefault&&a.preventDefault(),this.links_list.toggleClass("shown"),this.links_list.hasClass("shown")&&(this.over_family=!1,this.over_locales=!1,this.family_timeout&&clearTimeout(this.family_timeout),this.locales_timeout&&clearTimeout(this.locales_timeout),this.checkFamily(),this.checkLocales()),!1},onMouseEnterLinks:function(a){this.over_links=!0,this.links_timeout=setTimeout(function(){this.over_links&&this.links_list.addClass("shown")}.bind(this),this.timeout_time)},onMouseLeaveLinks:function(a){this.over_links=!1,this.links_timeout&&clearTimeout(this.links_timeout),setTimeout(this.checkLinks.bind(this),this.check_delay)},checkFamily:function(){this.over_family||this.family_list.removeClass("shown")},checkLocales:function(){this.over_locales||this.locale_list.removeClass("shown")},checkLinks:function(){this.over_links||this.links_list.removeClass("shown")},loadGruntIcons:function(){var a=["icons-data-svg","icons-data-png","icons-url-png"],b=!(!window.document.createElementNS||!window.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||window.opera&&-1===navigator.userAgent.indexOf("Chrome")),c=function(c){this.body.length&&this.body.addClass(a[c&&b?0:c?1:2])},d=new window.Image;d.onerror=function(){c.call(this,!1)}.bind(this),d.onload=function(){c.call(this,1===d.width&&1===d.height)}.bind(this),d.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="},buildNetworkBar:function(){var a;this.version_tag.length&&(this.config.version&&this.config.version.length?this.version_tag.html(this.config.version):this.version_tag.addClass("hidden")),this.config.locales&&Object.keys(this.config.locales).length&&this.config.locales.available&&Object.keys(this.config.locales.available).length?(this.locales_container.addClass("building"),a=this.buildDropDown(this.config.locales,this.locale_list),this.locales_container.removeClass("building"),a&&this.locales_container.addClass("built")):(this.$el.addClass("no-locales"),this.locales_container.length&&this.locales_container.addClass("hidden")),this.current_locale.html(this.config.locales&&this.config.locales.current?this.config.locales.current:"United States"),this.config.family&&Object.keys(this.config.family).length&&this.config.family.available&&Object.keys(this.config.family.available).length?(this.family_container.addClass("building"),a=this.buildDropDown(this.config.family,this.family_list),this.family_container.removeClass("building"),a&&this.family_container.addClass("built")):(this.$el.addClass("no-family"),this.family_container.length&&this.family_container.addClass("hidden"))},buildDropDown:function(a,b){if(!a||!b||!b.length)return!1;var c=a.tag||"li",d=a.tracking!==!1?a.tracking:!1,e=a.classes||[],f=a.tracking_prefix||"trk_source";b.removeClass("built").addClass("building");for(var g in a.available){var h,i,j={},k=$("<"+c+"/>"),l=e,m=null,n=null,o=[];if(a.available.hasOwnProperty(g)&&(j=a.available[g]),j!==!1){if(j.link&&j.link.length&&(m=$("<a/>")),i=j.label&&j.label.length?j.label:"",j.span_classes&&j.span_classes.length&&(o=j.span_classes),n=$("<span/>"),n.html(i),o.length&&n.addClass(o.join(" ")),m){var p=j.link_classes&&j.link_classes.length?j.link_classes:[],q=j.link;"Munchies"!=j.label&&(j.tracking&&j.tracking!==!1||0!=d)&&(q+=(-1==j.link.indexOf("?")?"?":"&")+f+"="+(j.tracking&&j.tracking.length?j.tracking:d)),m.attr({href:q,target:j.target&&j.target.length?j.target:"_self"}),p.length&&m.addClass(p.join(" ")),m.append(n),k.append(m)}else k.append(n);j.classes&&j.classes.length&&(l=this.arrayUnique(l.concat(j.classes))),h=l.length,l.length&&k.addClass(l.join(" ")),b.append(k)}}return b.removeClass("building").addClass("built"),!0},getAvailableLocales:function(){for(var a=AVAILABLE_LOCALES||[],b=window.location.pathname?"/"+window.location.pathname.split("/").slice(1,2)+"/":"",c={},d=0,e=a.length;e>d;d++){var f=a[d],g=f.link.replace("/","/");"/"!==g.substr(0,1)&&-1===g.indexOf("http")&&(g="/"+g),g="^"+g+"/?$";var h=new RegExp(g),i=[h.test(b)||"en_us"==CURRENT_LOCALE&&"/"===f.link?"current":""];c[f.link]={link:f.link,label:f.label,classes:i}}return c},getCurrentLocale:function(){for(var a=AVAILABLE_LOCALES||[],b=window.location.pathname?"/"+window.location.pathname.split("/").slice(1,2)+"/":"",c=0,d=a.length;d>c;c++){var e=a[c],f=e.link.replace("/","/");"/"!==f.substr(0,1)&&-1===f.indexOf("http")&&(f="/"+f),f="^"+f+"/?$";var g=new RegExp(f);if(g.test(b))return e.label}return""},arrayUnique:function(a){for(var b=a.concat(),c=0;c<b.length;++c)for(var d=c+1;d<b.length;++d)b[c]==b[d]&&b.splice(d--,1);return b}});return a});